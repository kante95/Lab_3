\documentclass[oneside]{book}

\usepackage{mathtools}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage{float}
\usepackage{tabularx}
\usepackage[toc,page]{appendix}
\usepackage{gensymb}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{circuitikz}
\usepackage{array}
\usepackage{booktabs}
\usepackage{colortbl}
\usepackage{xcolor}
\usepackage{xfrac}
\usepackage{caption}

\usepackage[a4paper, inner=1.5cm, outer=3cm, top=3cm, 
bottom=3cm, bindingoffset=1cm]{geometry} 

\renewcommand{\thesubfigure}{\arabic{subfigure}}


\usepackage{fancyhdr}
\renewcommand{\chaptername}{Experiment}


\begin{document}
\input{title}
\tableofcontents
\chapter{Basic circuits with an operational amplifier}
In this experiment we have built five different circuits. The first is an open loop circuit with the operational amplifier uA741, the goal was to find the maximum voltage outputed by the op-amp. The last four circuits are in closed loop configuration with a negative feedback, they consist in a follower, a non inverting amplifier, an inverting amplifier and a weighted summing amplifier. We have measured the voltage input and the voltage output of every circut.
\section{Materials}
\begin{itemize}
\item Operational amplifier uA741
\item Resistors, nominal value: 100 $\ohm$, 220 $\ohm$
\item Power supply RIGOL DP831A
\item Waveform generator RIGOL DG1032
\item Multimeter RIGOL DM3068
\item Oscilloscope AGILENT 54261A
\end{itemize}
\section{Experiment setup}
In the first four circuits the output of the waveform generator was a sine wave of 100Hz frequency and a peak-peak voltage of 100mV.
We measured the waveform output signal and the output voltage $v_o$ of the op-amp. The measurements were performed using an oscilloscope triggered externally, the signal acquired is an 8 cyles average. The voltage supply of the op-amp was set to $v_{cc} = 15$V for all the circuits.\\
\begin{figure}[H]
\centering
\begin{minipage}{.5\textwidth}
  \centering
  \begin{circuitikz}
 	\draw(0,0) node[op amp,yscale=-1] (opamp) {}
	%(opamp.+) node[left] {$v_+$}
	(opamp.-) ++ (-.3,0) node[ground] {} -- (opamp.-) 
	(opamp.out) node[right] {$v_o$}
	(opamp.up) ++(0,-.5) node[below] {$-v_{cc}$} -- (opamp.up)
	(opamp.down) ++ (0,.5) node[above] {$+v_{cc}$} -- (opamp.down);
	\draw(-3,-1) to[sV] (-3,.5) to[short] (opamp.+);
	\draw(-3,-1) node[ground] {};
	\end{circuitikz}
	\caption{Open loop circuit}
\end{minipage}%
\begin{minipage}{.5\textwidth}
  \centering
  \begin{circuitikz}
 	\draw(0,0) node[op amp,yscale=-1] (opamp) {}
	%(opamp.+) node[left] {$v_+$}
	(opamp.-) ++ (-.3,0) -- (opamp.-) 
	(opamp.-) ++ (-.3,0) -- (-1.5,-1.8) -- (1,-1.8) -- (1,0)
	(opamp.out) node[right] {$v_o$}
	(opamp.up) ++(0,-.5) node[below] {$-v_{cc}$} -- (opamp.up)
	(opamp.down) ++ (0,.5) node[above] {$+v_{cc}$} -- (opamp.down);
	\draw(-3,-1) to[sV] (-3,.5) to[short] (opamp.+);
	\draw(-3,-1) node[ground] {};
	\end{circuitikz}
	\caption{Follower}
\end{minipage}
\end{figure}
\begin{figure}[h]
\centering
\begin{minipage}{.5\textwidth}
  \centering
  \begin{circuitikz}
 \draw(0,0) node[op amp,yscale=-1] (opamp) {}
%(opamp.+) node[left] {$v_+$}
(opamp.-) ++ (-.3,0) -- (opamp.-) 
(opamp.-) ++ (-.3,0) to[R = $R_1$] (-3,-0.5) to (-3,-1) node[ground]{}
(opamp.-) ++ (-.3,0) -- (-1.5,-1.8) to[R,l_=$R_2$] (1,-1.8) -- (1,0)
(opamp.out) node[right] {$v_o$}
(opamp.up) ++(0,-.5) node[below] {$-v_{cc}$} -- (opamp.up)
(opamp.down) ++ (0,.5) node[above] {$+v_{cc}$} -- (opamp.down);
\draw(-4,-1) to[sV] (-4,.5) to[short] (opamp.+);
\draw(-4,-1) node[ground] {};
\end{circuitikz}
\caption{Non inverting amplifier}
\end{minipage}%
\begin{minipage}{.5\textwidth}
  \centering
  \begin{circuitikz}
 \draw(0,0) node[op amp,yscale=-1] (opamp) {}
%(opamp.+) node[left] {$v_+$}
(opamp.-) ++ (-.3,0) -- (opamp.-) 
(opamp.-) ++ (-.3,0) to[R = $R_1$] (-3.4,-0.5) to[sV] (-3.4,-1.7) node[ground]{}
(opamp.-) ++ (-.3,0) -- (-1.5,-1.8) to[R,l_=$R_2$] (1,-1.8) -- (1,0)
(opamp.out) node[right] {$v_o$}
(opamp.up) ++(0,-.5) node[below] {$-v_{cc}$} -- (opamp.up)
(opamp.down) ++ (0,.5) node[above] {$+v_{cc}$} -- (opamp.down);
\draw(-4.3,.5)node[ground] {} to[short] (opamp.+);
\end{circuitikz}
\caption{Inverting amplifier}
\end{minipage}
\end{figure}
For the last circuit we used another sine wave signal with the same 100Hz frequency and a different peak-peak voltage. The oscilloscope's setting and the measurement taken was the same as before.\\The values of the resistor are:  $R_1 =99.89 \pm 0.02$, $R_2 = 218.37\pm 0.04$, $R_3 = 99.89\pm 0.02$, measurement made with the multimeter.
\begin{figure}[H]
\centering
\begin{circuitikz}
\draw(0,0) node[op amp] (opamp) {}
	%(opamp.+) node[left] {$v_+$}
	(opamp.+) ++ (-.3,0) node[ground] {} -- (opamp.+) 
	(opamp.out) node[right] {$v_o$}
	(opamp.down) ++(0,-.5) node[below] {$-v_{cc}$} -- (opamp.down)
	(opamp.up) ++ (0,.5) node[above] {$+v_{cc}$} -- (opamp.up);
	\draw(-5,-1) to[sV] (-5,.5) to[R=$R_3$] (-3,.5) to[short] (opamp.-);
	\draw(-5,-1) node[ground] {};
	\draw(-5,2) to[sV] (-5,3.5) to[R=$R_1$] (-3,3.5) to[short] (-3,.5);
	\draw(-5,2) node[ground] {};
	\draw(-2,.5) to[short](-2,2.2) to[R=$R_2$](1,2.2) to[short](1,0);
\end{circuitikz}
\caption{Weighted summing amplifier}
\end{figure}
\section{Data analysis}
\begin{figure}[H]
\centering
\includegraphics[width=.7\textwidth]{img/scope1.png}
\caption{Open loop configuration}
\end{figure}
In the open loop configuration we get an output (visible in the figure one) that has a max absolute value of $14.35\pm 0.16$\footnote{Error based on oscilloscope's 8 bit resolution} V and changes sign with the input. This is what we can expect from the ideal model of the op-amp as justified from the equation $v_o = A_{ol}(v_+-v_-)$ where $A_{ol}$ tends to infinity. In the physical case the output voltage is costrained by the saturation voltage that's determinated by the voltage applied to the op-amp.
\begin{figure}[H]
\centering
\includegraphics[width=.7\textwidth]{img/scope2.png}
\caption{Emitter follower}
\end{figure}
In the emitter follower we expect, ideally, an output voltage equal to the input one. But we can see in the plot a small discrepancy between the two signals: that is determined, as before, by the non-ideality of the op-amp.
\begin{figure}[H]
\centering
\includegraphics[width=.7\textwidth]{img/scope3.png}
\caption{Non-inverting amplifier}
\end{figure}
In the non-inverting amplifier configuration we expect the output to be: $v_o = v_{in} (1 + \frac{R_2}{R_1})$. We can see the measured output is compatible with the theoretical value avalable in the table().
\begin{figure}[H]
\centering
\includegraphics[width=.7\textwidth]{img/scope4.png}
\caption{Inverting amplifier}
\end{figure}
In the circuit x the output should be : $v_o = - v_{in} \frac{R_2}{R_1}$. We see in the table x that the experimental value is compatible.
\begin{figure}[H]
\centering
\includegraphics[width=.7\textwidth]{img/scope5.png}
\caption{Weighted summing circuit}
\end{figure}
In the circuit y we used two inputs for aquiring an output voltage. This configuration sums these signals using the resistors $R_1$ and $R_2$ as weights, giving as output $v_o = - R_3 (\frac{v_1}{R_1} + \frac{v_2}{R_3})$, that we correctly measured. 
\end{document} 
